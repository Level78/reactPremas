{"ast":null,"code":"import _classCallCheck from \"C:/Users/HP/Desktop/React App/theFront-v3.2.2/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/HP/Desktop/React App/theFront-v3.2.2/react-scripts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport global from 'global'; // Deferred\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\n\nfunction Deferred() {\n  this.doneCallbacks = [];\n  this.failCallbacks = [];\n}\n\nDeferred.prototype = {\n  execute: function execute(list, args) {\n    var i = list.length;\n    args = Array.prototype.slice.call(args);\n\n    while (i) {\n      i -= 1;\n      list[i].apply(null, args);\n    }\n  },\n  resolve: function resolve() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    this.execute(this.doneCallbacks, args);\n  },\n  reject: function reject() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    this.execute(this.failCallbacks, args);\n  },\n  done: function done(callback) {\n    this.doneCallbacks.push(callback);\n  },\n  fail: function fail(callback) {\n    this.failCallbacks.push(callback);\n  }\n};\nvar ID = 0;\nvar YoutubeAPIadded = 0;\nvar VimeoAPIadded = 0;\nvar loadingYoutubePlayer = 0;\nvar loadingVimeoPlayer = 0;\nvar loadingYoutubeDefer = new Deferred();\nvar loadingVimeoDefer = new Deferred();\n\nvar VideoWorker = /*#__PURE__*/function () {\n  function VideoWorker(url, options) {\n    _classCallCheck(this, VideoWorker);\n\n    var self = this;\n    self.url = url;\n    self.options_default = {\n      autoplay: false,\n      loop: false,\n      mute: false,\n      volume: 100,\n      showControls: true,\n      accessibilityHidden: false,\n      // start / end video time in seconds\n      startTime: 0,\n      endTime: 0\n    };\n    self.options = self.extend({}, self.options_default, options); // Fix wrong option name.\n    // Thanks to https://github.com/nk-o/video-worker/issues/13.\n\n    if ('undefined' !== typeof self.options.showContols) {\n      self.options.showControls = self.options.showContols;\n      delete self.options.showContols;\n    } // check URL\n\n\n    self.videoID = self.parseURL(url); // init\n\n    if (self.videoID) {\n      self.ID = ID;\n      ID += 1;\n      self.loadAPI();\n      self.init();\n    }\n  } // Extend like jQuery.extend\n  // eslint-disable-next-line class-methods-use-this\n\n\n  _createClass(VideoWorker, [{\n    key: \"extend\",\n    value: function extend() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      var out = args[0] || {};\n      Object.keys(args).forEach(function (i) {\n        if (!args[i]) {\n          return;\n        }\n\n        Object.keys(args[i]).forEach(function (key) {\n          out[key] = args[i][key];\n        });\n      });\n      return out;\n    }\n  }, {\n    key: \"parseURL\",\n    value: function parseURL(url) {\n      // parse youtube ID\n      function getYoutubeID(ytUrl) {\n        // eslint-disable-next-line no-useless-escape\n        var regExp = /.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/;\n        var match = ytUrl.match(regExp);\n        return match && 11 === match[1].length ? match[1] : false;\n      } // parse vimeo ID\n\n\n      function getVimeoID(vmUrl) {\n        // eslint-disable-next-line no-useless-escape\n        var regExp = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n        var match = vmUrl.match(regExp);\n        return match && match[3] ? match[3] : false;\n      } // parse local string\n\n\n      function getLocalVideos(locUrl) {\n        // eslint-disable-next-line no-useless-escape\n        var videoFormats = locUrl.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/);\n        var result = {};\n        var ready = 0;\n        videoFormats.forEach(function (val) {\n          // eslint-disable-next-line no-useless-escape\n          var match = val.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\n\n          if (match && match[1] && match[2]) {\n            // eslint-disable-next-line prefer-destructuring\n            result['ogv' === match[1] ? 'ogg' : match[1]] = match[2];\n            ready = 1;\n          }\n        });\n        return ready ? result : false;\n      }\n\n      var Youtube = getYoutubeID(url);\n      var Vimeo = getVimeoID(url);\n      var Local = getLocalVideos(url);\n\n      if (Youtube) {\n        this.type = 'youtube';\n        return Youtube;\n      }\n\n      if (Vimeo) {\n        this.type = 'vimeo';\n        return Vimeo;\n      }\n\n      if (Local) {\n        this.type = 'local';\n        return Local;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isValid\",\n    value: function isValid() {\n      return !!this.videoID;\n    } // events\n\n  }, {\n    key: \"on\",\n    value: function on(name, callback) {\n      this.userEventsList = this.userEventsList || []; // add new callback in events list\n\n      (this.userEventsList[name] || (this.userEventsList[name] = [])).push(callback);\n    }\n  }, {\n    key: \"off\",\n    value: function off(name, callback) {\n      var _this = this;\n\n      if (!this.userEventsList || !this.userEventsList[name]) {\n        return;\n      }\n\n      if (!callback) {\n        delete this.userEventsList[name];\n      } else {\n        this.userEventsList[name].forEach(function (val, key) {\n          if (val === callback) {\n            _this.userEventsList[name][key] = false;\n          }\n        });\n      }\n    }\n  }, {\n    key: \"fire\",\n    value: function fire(name) {\n      var _this2 = this;\n\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n\n      if (this.userEventsList && 'undefined' !== typeof this.userEventsList[name]) {\n        this.userEventsList[name].forEach(function (val) {\n          // call with all arguments\n          if (val) {\n            val.apply(_this2, args);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"play\",\n    value: function play(start) {\n      var self = this;\n\n      if (!self.player) {\n        return;\n      }\n\n      if ('youtube' === self.type && self.player.playVideo) {\n        if ('undefined' !== typeof start) {\n          self.player.seekTo(start || 0);\n        }\n\n        if (global.YT.PlayerState.PLAYING !== self.player.getPlayerState()) {\n          self.player.playVideo();\n        }\n      }\n\n      if ('vimeo' === self.type) {\n        if ('undefined' !== typeof start) {\n          self.player.setCurrentTime(start);\n        }\n\n        self.player.getPaused().then(function (paused) {\n          if (paused) {\n            self.player.play();\n          }\n        });\n      }\n\n      if ('local' === self.type) {\n        if ('undefined' !== typeof start) {\n          self.player.currentTime = start;\n        }\n\n        if (self.player.paused) {\n          self.player.play();\n        }\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var self = this;\n\n      if (!self.player) {\n        return;\n      }\n\n      if ('youtube' === self.type && self.player.pauseVideo) {\n        if (global.YT.PlayerState.PLAYING === self.player.getPlayerState()) {\n          self.player.pauseVideo();\n        }\n      }\n\n      if ('vimeo' === self.type) {\n        self.player.getPaused().then(function (paused) {\n          if (!paused) {\n            self.player.pause();\n          }\n        });\n      }\n\n      if ('local' === self.type) {\n        if (!self.player.paused) {\n          self.player.pause();\n        }\n      }\n    }\n  }, {\n    key: \"mute\",\n    value: function mute() {\n      var self = this;\n\n      if (!self.player) {\n        return;\n      }\n\n      if ('youtube' === self.type && self.player.mute) {\n        self.player.mute();\n      }\n\n      if ('vimeo' === self.type && self.player.setVolume) {\n        self.player.setVolume(0);\n      }\n\n      if ('local' === self.type) {\n        self.$video.muted = true;\n      }\n    }\n  }, {\n    key: \"unmute\",\n    value: function unmute() {\n      var self = this;\n\n      if (!self.player) {\n        return;\n      }\n\n      if ('youtube' === self.type && self.player.mute) {\n        self.player.unMute();\n      }\n\n      if ('vimeo' === self.type && self.player.setVolume) {\n        self.player.setVolume(self.options.volume);\n      }\n\n      if ('local' === self.type) {\n        self.$video.muted = false;\n      }\n    }\n  }, {\n    key: \"setVolume\",\n    value: function setVolume() {\n      var volume = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var self = this;\n\n      if (!self.player || !volume) {\n        return;\n      }\n\n      if ('youtube' === self.type && self.player.setVolume) {\n        self.player.setVolume(volume);\n      }\n\n      if ('vimeo' === self.type && self.player.setVolume) {\n        self.player.setVolume(volume);\n      }\n\n      if ('local' === self.type) {\n        self.$video.volume = volume / 100;\n      }\n    }\n  }, {\n    key: \"getVolume\",\n    value: function getVolume(callback) {\n      var self = this;\n\n      if (!self.player) {\n        callback(false);\n        return;\n      }\n\n      if ('youtube' === self.type && self.player.getVolume) {\n        callback(self.player.getVolume());\n      }\n\n      if ('vimeo' === self.type && self.player.getVolume) {\n        self.player.getVolume().then(function (volume) {\n          callback(volume);\n        });\n      }\n\n      if ('local' === self.type) {\n        callback(self.$video.volume * 100);\n      }\n    }\n  }, {\n    key: \"getMuted\",\n    value: function getMuted(callback) {\n      var self = this;\n\n      if (!self.player) {\n        callback(null);\n        return;\n      }\n\n      if ('youtube' === self.type && self.player.isMuted) {\n        callback(self.player.isMuted());\n      }\n\n      if ('vimeo' === self.type && self.player.getVolume) {\n        self.player.getVolume().then(function (volume) {\n          callback(!!volume);\n        });\n      }\n\n      if ('local' === self.type) {\n        callback(self.$video.muted);\n      }\n    }\n  }, {\n    key: \"getImageURL\",\n    value: function getImageURL(callback) {\n      var self = this;\n\n      if (self.videoImage) {\n        callback(self.videoImage);\n        return;\n      }\n\n      if ('youtube' === self.type) {\n        var availableSizes = ['maxresdefault', 'sddefault', 'hqdefault', '0'];\n        var step = 0;\n        var tempImg = new Image();\n\n        tempImg.onload = function () {\n          // if no thumbnail, youtube add their own image with width = 120px\n          if (120 !== (this.naturalWidth || this.width) || step === availableSizes.length - 1) {\n            // ok\n            self.videoImage = \"https://img.youtube.com/vi/\".concat(self.videoID, \"/\").concat(availableSizes[step], \".jpg\");\n            callback(self.videoImage);\n          } else {\n            // try another size\n            step += 1;\n            this.src = \"https://img.youtube.com/vi/\".concat(self.videoID, \"/\").concat(availableSizes[step], \".jpg\");\n          }\n        };\n\n        tempImg.src = \"https://img.youtube.com/vi/\".concat(self.videoID, \"/\").concat(availableSizes[step], \".jpg\");\n      }\n\n      if ('vimeo' === self.type) {\n        var request = new XMLHttpRequest();\n        request.open('GET', \"https://vimeo.com/api/v2/video/\".concat(self.videoID, \".json\"), true);\n\n        request.onreadystatechange = function () {\n          if (4 === this.readyState) {\n            if (200 <= this.status && 400 > this.status) {\n              // Success!\n              var response = JSON.parse(this.responseText);\n              self.videoImage = response[0].thumbnail_large;\n              callback(self.videoImage);\n            } else {// Error :(\n            }\n          }\n        };\n\n        request.send();\n        request = null;\n      }\n    } // fallback to the old version.\n\n  }, {\n    key: \"getIframe\",\n    value: function getIframe(callback) {\n      this.getVideo(callback);\n    }\n  }, {\n    key: \"getVideo\",\n    value: function getVideo(callback) {\n      var self = this; // return generated video block\n\n      if (self.$video) {\n        callback(self.$video);\n        return;\n      } // generate new video block\n\n\n      self.onAPIready(function () {\n        var hiddenDiv;\n\n        if (!self.$video) {\n          hiddenDiv = document.createElement('div');\n          hiddenDiv.style.display = 'none';\n        } // Youtube\n\n\n        if ('youtube' === self.type) {\n          self.playerOptions = {\n            // GDPR Compliance.\n            host: 'https://www.youtube-nocookie.com',\n            videoId: self.videoID,\n            playerVars: {\n              autohide: 1,\n              rel: 0,\n              autoplay: 0,\n              // autoplay enable on mobile devices\n              playsinline: 1\n            }\n          }; // hide controls\n\n          if (!self.options.showControls) {\n            self.playerOptions.playerVars.iv_load_policy = 3;\n            self.playerOptions.playerVars.modestbranding = 1;\n            self.playerOptions.playerVars.controls = 0;\n            self.playerOptions.playerVars.showinfo = 0;\n            self.playerOptions.playerVars.disablekb = 1;\n          } // events\n\n\n          var ytStarted;\n          var ytProgressInterval;\n          self.playerOptions.events = {\n            onReady: function onReady(e) {\n              // mute\n              if (self.options.mute) {\n                e.target.mute();\n              } else if (self.options.volume) {\n                e.target.setVolume(self.options.volume);\n              } // autoplay\n\n\n              if (self.options.autoplay) {\n                self.play(self.options.startTime);\n              }\n\n              self.fire('ready', e); // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\n              // https://github.com/nk-o/video-worker/issues/2\n\n              if (self.options.loop && !self.options.endTime) {\n                var secondsOffset = 0.1;\n                self.options.endTime = self.player.getDuration() - secondsOffset;\n              } // volumechange\n\n\n              setInterval(function () {\n                self.getVolume(function (volume) {\n                  if (self.options.volume !== volume) {\n                    self.options.volume = volume;\n                    self.fire('volumechange', e);\n                  }\n                });\n              }, 150);\n            },\n            onStateChange: function onStateChange(e) {\n              // loop\n              if (self.options.loop && e.data === global.YT.PlayerState.ENDED) {\n                self.play(self.options.startTime);\n              }\n\n              if (!ytStarted && e.data === global.YT.PlayerState.PLAYING) {\n                ytStarted = 1;\n                self.fire('started', e);\n              }\n\n              if (e.data === global.YT.PlayerState.PLAYING) {\n                self.fire('play', e);\n              }\n\n              if (e.data === global.YT.PlayerState.PAUSED) {\n                self.fire('pause', e);\n              }\n\n              if (e.data === global.YT.PlayerState.ENDED) {\n                self.fire('ended', e);\n              } // progress check\n\n\n              if (e.data === global.YT.PlayerState.PLAYING) {\n                ytProgressInterval = setInterval(function () {\n                  self.fire('timeupdate', e); // check for end of video and play again or stop\n\n                  if (self.options.endTime && self.player.getCurrentTime() >= self.options.endTime) {\n                    if (self.options.loop) {\n                      self.play(self.options.startTime);\n                    } else {\n                      self.pause();\n                    }\n                  }\n                }, 150);\n              } else {\n                clearInterval(ytProgressInterval);\n              }\n            },\n            onError: function onError(e) {\n              self.fire('error', e);\n            }\n          };\n          var firstInit = !self.$video;\n\n          if (firstInit) {\n            var div = document.createElement('div');\n            div.setAttribute('id', self.playerID);\n            hiddenDiv.appendChild(div);\n            document.body.appendChild(hiddenDiv);\n          }\n\n          self.player = self.player || new global.YT.Player(self.playerID, self.playerOptions);\n\n          if (firstInit) {\n            self.$video = document.getElementById(self.playerID); // add accessibility attributes\n\n            if (self.options.accessibilityHidden) {\n              self.$video.setAttribute('tabindex', '-1');\n              self.$video.setAttribute('aria-hidden', 'true');\n            } // get video width and height\n\n\n            self.videoWidth = parseInt(self.$video.getAttribute('width'), 10) || 1280;\n            self.videoHeight = parseInt(self.$video.getAttribute('height'), 10) || 720;\n          }\n        } // Vimeo\n\n\n        if ('vimeo' === self.type) {\n          self.playerOptions = {\n            // GDPR Compliance.\n            dnt: 1,\n            id: self.videoID,\n            autopause: 0,\n            transparent: 0,\n            autoplay: self.options.autoplay ? 1 : 0,\n            loop: self.options.loop ? 1 : 0,\n            muted: self.options.mute ? 1 : 0\n          };\n\n          if (self.options.volume) {\n            self.playerOptions.volume = self.options.volume;\n          } // hide controls\n\n\n          if (!self.options.showControls) {\n            self.playerOptions.badge = 0;\n            self.playerOptions.byline = 0;\n            self.playerOptions.portrait = 0;\n            self.playerOptions.title = 0;\n            self.playerOptions.background = 1;\n          }\n\n          if (!self.$video) {\n            var playerOptionsString = '';\n            Object.keys(self.playerOptions).forEach(function (key) {\n              if ('' !== playerOptionsString) {\n                playerOptionsString += '&';\n              }\n\n              playerOptionsString += \"\".concat(key, \"=\").concat(encodeURIComponent(self.playerOptions[key]));\n            }); // we need to create iframe manually because when we create it using API\n            // js events won't triggers after iframe moved to another place\n\n            self.$video = document.createElement('iframe');\n            self.$video.setAttribute('id', self.playerID);\n            self.$video.setAttribute('src', \"https://player.vimeo.com/video/\".concat(self.videoID, \"?\").concat(playerOptionsString));\n            self.$video.setAttribute('frameborder', '0');\n            self.$video.setAttribute('mozallowfullscreen', '');\n            self.$video.setAttribute('allowfullscreen', '');\n            self.$video.setAttribute('title', 'Vimeo video player'); // add accessibility attributes\n\n            if (self.options.accessibilityHidden) {\n              self.$video.setAttribute('tabindex', '-1');\n              self.$video.setAttribute('aria-hidden', 'true');\n            }\n\n            hiddenDiv.appendChild(self.$video);\n            document.body.appendChild(hiddenDiv);\n          }\n\n          self.player = self.player || new global.Vimeo.Player(self.$video, self.playerOptions); // set current time for autoplay\n\n          if (self.options.startTime && self.options.autoplay) {\n            self.player.setCurrentTime(self.options.startTime);\n          } // get video width and height\n\n\n          self.player.getVideoWidth().then(function (width) {\n            self.videoWidth = width || 1280;\n          });\n          self.player.getVideoHeight().then(function (height) {\n            self.videoHeight = height || 720;\n          }); // events\n\n          var vmStarted;\n          self.player.on('timeupdate', function (e) {\n            if (!vmStarted) {\n              self.fire('started', e);\n              vmStarted = 1;\n            }\n\n            self.fire('timeupdate', e); // check for end of video and play again or stop\n\n            if (self.options.endTime) {\n              if (self.options.endTime && e.seconds >= self.options.endTime) {\n                if (self.options.loop) {\n                  self.play(self.options.startTime);\n                } else {\n                  self.pause();\n                }\n              }\n            }\n          });\n          self.player.on('play', function (e) {\n            self.fire('play', e); // check for the start time and start with it\n\n            if (self.options.startTime && 0 === e.seconds) {\n              self.play(self.options.startTime);\n            }\n          });\n          self.player.on('pause', function (e) {\n            self.fire('pause', e);\n          });\n          self.player.on('ended', function (e) {\n            self.fire('ended', e);\n          });\n          self.player.on('loaded', function (e) {\n            self.fire('ready', e);\n          });\n          self.player.on('volumechange', function (e) {\n            self.fire('volumechange', e);\n          });\n          self.player.on('error', function (e) {\n            self.fire('error', e);\n          });\n        } // Local\n\n\n        function addSourceToLocal(element, src, type) {\n          var source = document.createElement('source');\n          source.src = src;\n          source.type = type;\n          element.appendChild(source);\n        }\n\n        if ('local' === self.type) {\n          if (!self.$video) {\n            self.$video = document.createElement('video'); // show controls\n\n            if (self.options.showControls) {\n              self.$video.controls = true;\n            } // mute\n\n\n            if (self.options.mute) {\n              self.$video.muted = true;\n            } else if (self.$video.volume) {\n              self.$video.volume = self.options.volume / 100;\n            } // loop\n\n\n            if (self.options.loop) {\n              self.$video.loop = true;\n            } // autoplay enable on mobile devices\n\n\n            self.$video.setAttribute('playsinline', '');\n            self.$video.setAttribute('webkit-playsinline', ''); // add accessibility attributes\n\n            if (self.options.accessibilityHidden) {\n              self.$video.setAttribute('tabindex', '-1');\n              self.$video.setAttribute('aria-hidden', 'true');\n            }\n\n            self.$video.setAttribute('id', self.playerID);\n            hiddenDiv.appendChild(self.$video);\n            document.body.appendChild(hiddenDiv);\n            Object.keys(self.videoID).forEach(function (key) {\n              addSourceToLocal(self.$video, self.videoID[key], \"video/\".concat(key));\n            });\n          }\n\n          self.player = self.player || self.$video;\n          var locStarted;\n          self.player.addEventListener('playing', function (e) {\n            if (!locStarted) {\n              self.fire('started', e);\n            }\n\n            locStarted = 1;\n          });\n          self.player.addEventListener('timeupdate', function (e) {\n            self.fire('timeupdate', e); // check for end of video and play again or stop\n\n            if (self.options.endTime) {\n              if (self.options.endTime && this.currentTime >= self.options.endTime) {\n                if (self.options.loop) {\n                  self.play(self.options.startTime);\n                } else {\n                  self.pause();\n                }\n              }\n            }\n          });\n          self.player.addEventListener('play', function (e) {\n            self.fire('play', e);\n          });\n          self.player.addEventListener('pause', function (e) {\n            self.fire('pause', e);\n          });\n          self.player.addEventListener('ended', function (e) {\n            self.fire('ended', e);\n          });\n          self.player.addEventListener('loadedmetadata', function () {\n            // get video width and height\n            self.videoWidth = this.videoWidth || 1280;\n            self.videoHeight = this.videoHeight || 720;\n            self.fire('ready'); // autoplay\n\n            if (self.options.autoplay) {\n              self.play(self.options.startTime);\n            }\n          });\n          self.player.addEventListener('volumechange', function (e) {\n            self.getVolume(function (volume) {\n              self.options.volume = volume;\n            });\n            self.fire('volumechange', e);\n          });\n          self.player.addEventListener('error', function (e) {\n            self.fire('error', e);\n          });\n        }\n\n        callback(self.$video);\n      });\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var self = this;\n      self.playerID = \"VideoWorker-\".concat(self.ID);\n    }\n  }, {\n    key: \"loadAPI\",\n    value: function loadAPI() {\n      var self = this;\n\n      if (YoutubeAPIadded && VimeoAPIadded) {\n        return;\n      }\n\n      var src = ''; // load Youtube API\n\n      if ('youtube' === self.type && !YoutubeAPIadded) {\n        YoutubeAPIadded = 1;\n        src = 'https://www.youtube.com/iframe_api';\n      } // load Vimeo API\n\n\n      if ('vimeo' === self.type && !VimeoAPIadded) {\n        VimeoAPIadded = 1; // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\n\n        if ('undefined' !== typeof global.Vimeo) {\n          return;\n        }\n\n        src = 'https://player.vimeo.com/api/player.js';\n      }\n\n      if (!src) {\n        return;\n      } // add script in head section\n\n\n      var tag = document.createElement('script');\n      var head = document.getElementsByTagName('head')[0];\n      tag.src = src;\n      head.appendChild(tag);\n      head = null;\n      tag = null;\n    }\n  }, {\n    key: \"onAPIready\",\n    value: function onAPIready(callback) {\n      var self = this; // Youtube\n\n      if ('youtube' === self.type) {\n        // Listen for global YT player callback\n        if (('undefined' === typeof global.YT || 0 === global.YT.loaded) && !loadingYoutubePlayer) {\n          // Prevents Ready event from being called twice\n          loadingYoutubePlayer = 1; // Creates deferred so, other players know when to wait.\n\n          window.onYouTubeIframeAPIReady = function () {\n            window.onYouTubeIframeAPIReady = null;\n            loadingYoutubeDefer.resolve('done');\n            callback();\n          };\n        } else if ('object' === typeof global.YT && 1 === global.YT.loaded) {\n          callback();\n        } else {\n          loadingYoutubeDefer.done(function () {\n            callback();\n          });\n        }\n      } // Vimeo\n\n\n      if ('vimeo' === self.type) {\n        if ('undefined' === typeof global.Vimeo && !loadingVimeoPlayer) {\n          loadingVimeoPlayer = 1;\n          var vimeoInterval = setInterval(function () {\n            if ('undefined' !== typeof global.Vimeo) {\n              clearInterval(vimeoInterval);\n              loadingVimeoDefer.resolve('done');\n              callback();\n            }\n          }, 20);\n        } else if ('undefined' !== typeof global.Vimeo) {\n          callback();\n        } else {\n          loadingVimeoDefer.done(function () {\n            callback();\n          });\n        }\n      } // Local\n\n\n      if ('local' === self.type) {\n        callback();\n      }\n    }\n  }]);\n\n  return VideoWorker;\n}();\n\nexport { VideoWorker as default };","map":{"version":3,"sources":["C:/Users/HP/Desktop/React App/theFront-v3.2.2/react-scripts/node_modules/video-worker/src/video-worker.esm.js"],"names":["global","Deferred","doneCallbacks","failCallbacks","prototype","execute","list","args","i","length","Array","slice","call","apply","resolve","reject","done","callback","push","fail","ID","YoutubeAPIadded","VimeoAPIadded","loadingYoutubePlayer","loadingVimeoPlayer","loadingYoutubeDefer","loadingVimeoDefer","VideoWorker","url","options","self","options_default","autoplay","loop","mute","volume","showControls","accessibilityHidden","startTime","endTime","extend","showContols","videoID","parseURL","loadAPI","init","out","Object","keys","forEach","key","getYoutubeID","ytUrl","regExp","match","getVimeoID","vmUrl","getLocalVideos","locUrl","videoFormats","split","result","ready","val","Youtube","Vimeo","Local","type","name","userEventsList","start","player","playVideo","seekTo","YT","PlayerState","PLAYING","getPlayerState","setCurrentTime","getPaused","then","paused","play","currentTime","pauseVideo","pause","setVolume","$video","muted","unMute","getVolume","isMuted","videoImage","availableSizes","step","tempImg","Image","onload","naturalWidth","width","src","request","XMLHttpRequest","open","onreadystatechange","readyState","status","response","JSON","parse","responseText","thumbnail_large","send","getVideo","onAPIready","hiddenDiv","document","createElement","style","display","playerOptions","host","videoId","playerVars","autohide","rel","playsinline","iv_load_policy","modestbranding","controls","showinfo","disablekb","ytStarted","ytProgressInterval","events","onReady","e","target","fire","secondsOffset","getDuration","setInterval","onStateChange","data","ENDED","PAUSED","getCurrentTime","clearInterval","onError","firstInit","div","setAttribute","playerID","appendChild","body","Player","getElementById","videoWidth","parseInt","getAttribute","videoHeight","dnt","id","autopause","transparent","badge","byline","portrait","title","background","playerOptionsString","encodeURIComponent","getVideoWidth","getVideoHeight","height","vmStarted","on","seconds","addSourceToLocal","element","source","locStarted","addEventListener","tag","head","getElementsByTagName","loaded","window","onYouTubeIframeAPIReady","vimeoInterval"],"mappings":"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","sourcesContent":["import global from 'global';\n\n// Deferred\n// thanks http://stackoverflow.com/questions/18096715/implement-deferred-object-without-using-jquery\nfunction Deferred() {\n    this.doneCallbacks = [];\n    this.failCallbacks = [];\n}\n\nDeferred.prototype = {\n    execute( list, args ) {\n        let i = list.length;\n        args = Array.prototype.slice.call( args );\n\n        while ( i ) {\n            i -= 1;\n            list[ i ].apply( null, args );\n        }\n    },\n    resolve( ...args ) {\n        this.execute( this.doneCallbacks, args );\n    },\n    reject( ...args ) {\n        this.execute( this.failCallbacks, args );\n    },\n    done( callback ) {\n        this.doneCallbacks.push( callback );\n    },\n    fail( callback ) {\n        this.failCallbacks.push( callback );\n    },\n};\n\nlet ID = 0;\nlet YoutubeAPIadded = 0;\nlet VimeoAPIadded = 0;\nlet loadingYoutubePlayer = 0;\nlet loadingVimeoPlayer = 0;\nconst loadingYoutubeDefer = new Deferred();\nconst loadingVimeoDefer = new Deferred();\n\nexport default class VideoWorker {\n    constructor( url, options ) {\n        const self = this;\n\n        self.url = url;\n\n        self.options_default = {\n            autoplay: false,\n            loop: false,\n            mute: false,\n            volume: 100,\n            showControls: true,\n            accessibilityHidden: false,\n\n            // start / end video time in seconds\n            startTime: 0,\n            endTime: 0,\n        };\n\n        self.options = self.extend( {}, self.options_default, options );\n\n        // Fix wrong option name.\n        // Thanks to https://github.com/nk-o/video-worker/issues/13.\n        if ( 'undefined' !== typeof self.options.showContols ) {\n            self.options.showControls = self.options.showContols;\n            delete self.options.showContols;\n        }\n\n        // check URL\n        self.videoID = self.parseURL( url );\n\n        // init\n        if ( self.videoID ) {\n            self.ID = ID;\n            ID += 1;\n            self.loadAPI();\n            self.init();\n        }\n    }\n\n    // Extend like jQuery.extend\n    // eslint-disable-next-line class-methods-use-this\n    extend( ...args ) {\n        const out = args[ 0 ] || {};\n\n        Object.keys( args ).forEach( ( i ) => {\n            if ( ! args[ i ] ) {\n                return;\n            }\n            Object.keys( args[ i ] ).forEach( ( key ) => {\n                out[ key ] = args[ i ][ key ];\n            } );\n        } );\n\n        return out;\n    }\n\n    parseURL( url ) {\n        // parse youtube ID\n        function getYoutubeID( ytUrl ) {\n            // eslint-disable-next-line no-useless-escape\n            const regExp = /.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/;\n            const match = ytUrl.match( regExp );\n            return match && 11 === match[ 1 ].length ? match[ 1 ] : false;\n        }\n\n        // parse vimeo ID\n        function getVimeoID( vmUrl ) {\n            // eslint-disable-next-line no-useless-escape\n            const regExp = /https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/;\n            const match = vmUrl.match( regExp );\n            return match && match[ 3 ] ? match[ 3 ] : false;\n        }\n\n        // parse local string\n        function getLocalVideos( locUrl ) {\n            // eslint-disable-next-line no-useless-escape\n            const videoFormats = locUrl.split( /,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/ );\n            const result = {};\n            let ready = 0;\n            videoFormats.forEach( ( val ) => {\n                // eslint-disable-next-line no-useless-escape\n                const match = val.match( /^(mp4|webm|ogv|ogg)\\:(.*)/ );\n                if ( match && match[ 1 ] && match[ 2 ] ) {\n                    // eslint-disable-next-line prefer-destructuring\n                    result[ 'ogv' === match[ 1 ] ? 'ogg' : match[ 1 ] ] = match[ 2 ];\n                    ready = 1;\n                }\n            } );\n            return ready ? result : false;\n        }\n\n        const Youtube = getYoutubeID( url );\n        const Vimeo = getVimeoID( url );\n        const Local = getLocalVideos( url );\n\n        if ( Youtube ) {\n            this.type = 'youtube';\n            return Youtube;\n        }\n\n        if ( Vimeo ) {\n            this.type = 'vimeo';\n            return Vimeo;\n        }\n\n        if ( Local ) {\n            this.type = 'local';\n            return Local;\n        }\n\n        return false;\n    }\n\n    isValid() {\n        return !! this.videoID;\n    }\n\n    // events\n    on( name, callback ) {\n        this.userEventsList = this.userEventsList || [];\n\n        // add new callback in events list\n        ( this.userEventsList[ name ] || ( this.userEventsList[ name ] = [] ) ).push( callback );\n    }\n\n    off( name, callback ) {\n        if ( ! this.userEventsList || ! this.userEventsList[ name ] ) {\n            return;\n        }\n\n        if ( ! callback ) {\n            delete this.userEventsList[ name ];\n        } else {\n            this.userEventsList[ name ].forEach( ( val, key ) => {\n                if ( val === callback ) {\n                    this.userEventsList[ name ][ key ] = false;\n                }\n            } );\n        }\n    }\n\n    fire( name, ...args ) {\n        if ( this.userEventsList && 'undefined' !== typeof this.userEventsList[ name ] ) {\n            this.userEventsList[ name ].forEach( ( val ) => {\n                // call with all arguments\n                if ( val ) {\n                    val.apply( this, args );\n                }\n            } );\n        }\n    }\n\n    play( start ) {\n        const self = this;\n        if ( ! self.player ) {\n            return;\n        }\n\n        if ( 'youtube' === self.type && self.player.playVideo ) {\n            if ( 'undefined' !== typeof start ) {\n                self.player.seekTo( start || 0 );\n            }\n            if ( global.YT.PlayerState.PLAYING !== self.player.getPlayerState() ) {\n                self.player.playVideo();\n            }\n        }\n\n        if ( 'vimeo' === self.type ) {\n            if ( 'undefined' !== typeof start ) {\n                self.player.setCurrentTime( start );\n            }\n            self.player.getPaused().then( ( paused ) => {\n                if ( paused ) {\n                    self.player.play();\n                }\n            } );\n        }\n\n        if ( 'local' === self.type ) {\n            if ( 'undefined' !== typeof start ) {\n                self.player.currentTime = start;\n            }\n            if ( self.player.paused ) {\n                self.player.play();\n            }\n        }\n    }\n\n    pause() {\n        const self = this;\n        if ( ! self.player ) {\n            return;\n        }\n\n        if ( 'youtube' === self.type && self.player.pauseVideo ) {\n            if ( global.YT.PlayerState.PLAYING === self.player.getPlayerState() ) {\n                self.player.pauseVideo();\n            }\n        }\n\n        if ( 'vimeo' === self.type ) {\n            self.player.getPaused().then( ( paused ) => {\n                if ( ! paused ) {\n                    self.player.pause();\n                }\n            } );\n        }\n\n        if ( 'local' === self.type ) {\n            if ( ! self.player.paused ) {\n                self.player.pause();\n            }\n        }\n    }\n\n    mute() {\n        const self = this;\n        if ( ! self.player ) {\n            return;\n        }\n\n        if ( 'youtube' === self.type && self.player.mute ) {\n            self.player.mute();\n        }\n\n        if ( 'vimeo' === self.type && self.player.setVolume ) {\n            self.player.setVolume( 0 );\n        }\n\n        if ( 'local' === self.type ) {\n            self.$video.muted = true;\n        }\n    }\n\n    unmute() {\n        const self = this;\n        if ( ! self.player ) {\n            return;\n        }\n\n        if ( 'youtube' === self.type && self.player.mute ) {\n            self.player.unMute();\n        }\n\n        if ( 'vimeo' === self.type && self.player.setVolume ) {\n            self.player.setVolume( self.options.volume );\n        }\n\n        if ( 'local' === self.type ) {\n            self.$video.muted = false;\n        }\n    }\n\n    setVolume( volume = false ) {\n        const self = this;\n        if ( ! self.player || ! volume ) {\n            return;\n        }\n\n        if ( 'youtube' === self.type && self.player.setVolume ) {\n            self.player.setVolume( volume );\n        }\n\n        if ( 'vimeo' === self.type && self.player.setVolume ) {\n            self.player.setVolume( volume );\n        }\n\n        if ( 'local' === self.type ) {\n            self.$video.volume = volume / 100;\n        }\n    }\n\n    getVolume( callback ) {\n        const self = this;\n        if ( ! self.player ) {\n            callback( false );\n            return;\n        }\n\n        if ( 'youtube' === self.type && self.player.getVolume ) {\n            callback( self.player.getVolume() );\n        }\n\n        if ( 'vimeo' === self.type && self.player.getVolume ) {\n            self.player.getVolume().then( ( volume ) => {\n                callback( volume );\n            } );\n        }\n\n        if ( 'local' === self.type ) {\n            callback( self.$video.volume * 100 );\n        }\n    }\n\n    getMuted( callback ) {\n        const self = this;\n        if ( ! self.player ) {\n            callback( null );\n            return;\n        }\n\n        if ( 'youtube' === self.type && self.player.isMuted ) {\n            callback( self.player.isMuted() );\n        }\n\n        if ( 'vimeo' === self.type && self.player.getVolume ) {\n            self.player.getVolume().then( ( volume ) => {\n                callback( !! volume );\n            } );\n        }\n\n        if ( 'local' === self.type ) {\n            callback( self.$video.muted );\n        }\n    }\n\n    getImageURL( callback ) {\n        const self = this;\n\n        if ( self.videoImage ) {\n            callback( self.videoImage );\n            return;\n        }\n\n        if ( 'youtube' === self.type ) {\n            const availableSizes = [\n                'maxresdefault',\n                'sddefault',\n                'hqdefault',\n                '0',\n            ];\n            let step = 0;\n\n            const tempImg = new Image();\n            tempImg.onload = function() {\n                // if no thumbnail, youtube add their own image with width = 120px\n                if ( 120 !== ( this.naturalWidth || this.width ) || step === availableSizes.length - 1 ) {\n                    // ok\n                    self.videoImage = `https://img.youtube.com/vi/${ self.videoID }/${ availableSizes[ step ] }.jpg`;\n                    callback( self.videoImage );\n                } else {\n                    // try another size\n                    step += 1;\n                    this.src = `https://img.youtube.com/vi/${ self.videoID }/${ availableSizes[ step ] }.jpg`;\n                }\n            };\n            tempImg.src = `https://img.youtube.com/vi/${ self.videoID }/${ availableSizes[ step ] }.jpg`;\n        }\n\n        if ( 'vimeo' === self.type ) {\n            let request = new XMLHttpRequest();\n            request.open( 'GET', `https://vimeo.com/api/v2/video/${ self.videoID }.json`, true );\n            request.onreadystatechange = function() {\n                if ( 4 === this.readyState ) {\n                    if ( 200 <= this.status && 400 > this.status ) {\n                        // Success!\n                        const response = JSON.parse( this.responseText );\n                        self.videoImage = response[ 0 ].thumbnail_large;\n                        callback( self.videoImage );\n                    } else {\n                        // Error :(\n                    }\n                }\n            };\n            request.send();\n            request = null;\n        }\n    }\n\n    // fallback to the old version.\n    getIframe( callback ) {\n        this.getVideo( callback );\n    }\n\n    getVideo( callback ) {\n        const self = this;\n\n        // return generated video block\n        if ( self.$video ) {\n            callback( self.$video );\n            return;\n        }\n\n        // generate new video block\n        self.onAPIready( () => {\n            let hiddenDiv;\n            if ( ! self.$video ) {\n                hiddenDiv = document.createElement( 'div' );\n                hiddenDiv.style.display = 'none';\n            }\n\n            // Youtube\n            if ( 'youtube' === self.type ) {\n                self.playerOptions = {\n                    // GDPR Compliance.\n                    host: 'https://www.youtube-nocookie.com',\n                    videoId: self.videoID,\n                    playerVars: {\n                        autohide: 1,\n                        rel: 0,\n                        autoplay: 0,\n                        // autoplay enable on mobile devices\n                        playsinline: 1,\n                    },\n                };\n\n                // hide controls\n                if ( ! self.options.showControls ) {\n                    self.playerOptions.playerVars.iv_load_policy = 3;\n                    self.playerOptions.playerVars.modestbranding = 1;\n                    self.playerOptions.playerVars.controls = 0;\n                    self.playerOptions.playerVars.showinfo = 0;\n                    self.playerOptions.playerVars.disablekb = 1;\n                }\n\n                // events\n                let ytStarted;\n                let ytProgressInterval;\n                self.playerOptions.events = {\n                    onReady( e ) {\n                        // mute\n                        if ( self.options.mute ) {\n                            e.target.mute();\n                        } else if ( self.options.volume ) {\n                            e.target.setVolume( self.options.volume );\n                        }\n\n                        // autoplay\n                        if ( self.options.autoplay ) {\n                            self.play( self.options.startTime );\n                        }\n                        self.fire( 'ready', e );\n\n                        // For seamless loops, set the endTime to 0.1 seconds less than the video's duration\n                        // https://github.com/nk-o/video-worker/issues/2\n                        if ( self.options.loop && ! self.options.endTime ) {\n                            const secondsOffset = 0.1;\n                            self.options.endTime = self.player.getDuration() - secondsOffset;\n                        }\n\n                        // volumechange\n                        setInterval( () => {\n                            self.getVolume( ( volume ) => {\n                                if ( self.options.volume !== volume ) {\n                                    self.options.volume = volume;\n                                    self.fire( 'volumechange', e );\n                                }\n                            } );\n                        }, 150 );\n                    },\n                    onStateChange( e ) {\n                        // loop\n                        if ( self.options.loop && e.data === global.YT.PlayerState.ENDED ) {\n                            self.play( self.options.startTime );\n                        }\n                        if ( ! ytStarted && e.data === global.YT.PlayerState.PLAYING ) {\n                            ytStarted = 1;\n                            self.fire( 'started', e );\n                        }\n                        if ( e.data === global.YT.PlayerState.PLAYING ) {\n                            self.fire( 'play', e );\n                        }\n                        if ( e.data === global.YT.PlayerState.PAUSED ) {\n                            self.fire( 'pause', e );\n                        }\n                        if ( e.data === global.YT.PlayerState.ENDED ) {\n                            self.fire( 'ended', e );\n                        }\n\n                        // progress check\n                        if ( e.data === global.YT.PlayerState.PLAYING ) {\n                            ytProgressInterval = setInterval( () => {\n                                self.fire( 'timeupdate', e );\n\n                                // check for end of video and play again or stop\n                                if ( self.options.endTime && self.player.getCurrentTime() >= self.options.endTime ) {\n                                    if ( self.options.loop ) {\n                                        self.play( self.options.startTime );\n                                    } else {\n                                        self.pause();\n                                    }\n                                }\n                            }, 150 );\n                        } else {\n                            clearInterval( ytProgressInterval );\n                        }\n                    },\n                    onError( e ) {\n                        self.fire( 'error', e );\n                    },\n                };\n\n                const firstInit = ! self.$video;\n                if ( firstInit ) {\n                    const div = document.createElement( 'div' );\n                    div.setAttribute( 'id', self.playerID );\n                    hiddenDiv.appendChild( div );\n                    document.body.appendChild( hiddenDiv );\n                }\n                self.player = self.player || new global.YT.Player( self.playerID, self.playerOptions );\n                if ( firstInit ) {\n                    self.$video = document.getElementById( self.playerID );\n\n                    // add accessibility attributes\n                    if ( self.options.accessibilityHidden ) {\n                        self.$video.setAttribute( 'tabindex', '-1' );\n                        self.$video.setAttribute( 'aria-hidden', 'true' );\n                    }\n\n                    // get video width and height\n                    self.videoWidth = parseInt( self.$video.getAttribute( 'width' ), 10 ) || 1280;\n                    self.videoHeight = parseInt( self.$video.getAttribute( 'height' ), 10 ) || 720;\n                }\n            }\n\n            // Vimeo\n            if ( 'vimeo' === self.type ) {\n                self.playerOptions = {\n                    // GDPR Compliance.\n                    dnt: 1,\n                    id: self.videoID,\n                    autopause: 0,\n                    transparent: 0,\n                    autoplay: self.options.autoplay ? 1 : 0,\n                    loop: self.options.loop ? 1 : 0,\n                    muted: self.options.mute ? 1 : 0,\n                };\n\n                if ( self.options.volume ) {\n                    self.playerOptions.volume = self.options.volume;\n                }\n\n                // hide controls\n                if ( ! self.options.showControls ) {\n                    self.playerOptions.badge = 0;\n                    self.playerOptions.byline = 0;\n                    self.playerOptions.portrait = 0;\n                    self.playerOptions.title = 0;\n                    self.playerOptions.background = 1;\n                }\n\n                if ( ! self.$video ) {\n                    let playerOptionsString = '';\n                    Object.keys( self.playerOptions ).forEach( ( key ) => {\n                        if ( '' !== playerOptionsString ) {\n                            playerOptionsString += '&';\n                        }\n                        playerOptionsString += `${ key }=${ encodeURIComponent( self.playerOptions[ key ] ) }`;\n                    } );\n\n                    // we need to create iframe manually because when we create it using API\n                    // js events won't triggers after iframe moved to another place\n                    self.$video = document.createElement( 'iframe' );\n                    self.$video.setAttribute( 'id', self.playerID );\n                    self.$video.setAttribute( 'src', `https://player.vimeo.com/video/${ self.videoID }?${ playerOptionsString }` );\n                    self.$video.setAttribute( 'frameborder', '0' );\n                    self.$video.setAttribute( 'mozallowfullscreen', '' );\n                    self.$video.setAttribute( 'allowfullscreen', '' );\n                    self.$video.setAttribute( 'title', 'Vimeo video player' );\n\n                    // add accessibility attributes\n                    if ( self.options.accessibilityHidden ) {\n                        self.$video.setAttribute( 'tabindex', '-1' );\n                        self.$video.setAttribute( 'aria-hidden', 'true' );\n                    }\n\n                    hiddenDiv.appendChild( self.$video );\n                    document.body.appendChild( hiddenDiv );\n                }\n                self.player = self.player || new global.Vimeo.Player( self.$video, self.playerOptions );\n\n                // set current time for autoplay\n                if ( self.options.startTime && self.options.autoplay ) {\n                    self.player.setCurrentTime( self.options.startTime );\n                }\n\n                // get video width and height\n                self.player.getVideoWidth().then( ( width ) => {\n                    self.videoWidth = width || 1280;\n                } );\n                self.player.getVideoHeight().then( ( height ) => {\n                    self.videoHeight = height || 720;\n                } );\n\n                // events\n                let vmStarted;\n                self.player.on( 'timeupdate', ( e ) => {\n                    if ( ! vmStarted ) {\n                        self.fire( 'started', e );\n                        vmStarted = 1;\n                    }\n\n                    self.fire( 'timeupdate', e );\n\n                    // check for end of video and play again or stop\n                    if ( self.options.endTime ) {\n                        if ( self.options.endTime && e.seconds >= self.options.endTime ) {\n                            if ( self.options.loop ) {\n                                self.play( self.options.startTime );\n                            } else {\n                                self.pause();\n                            }\n                        }\n                    }\n                } );\n                self.player.on( 'play', ( e ) => {\n                    self.fire( 'play', e );\n\n                    // check for the start time and start with it\n                    if ( self.options.startTime && 0 === e.seconds ) {\n                        self.play( self.options.startTime );\n                    }\n                } );\n                self.player.on( 'pause', ( e ) => {\n                    self.fire( 'pause', e );\n                } );\n                self.player.on( 'ended', ( e ) => {\n                    self.fire( 'ended', e );\n                } );\n                self.player.on( 'loaded', ( e ) => {\n                    self.fire( 'ready', e );\n                } );\n                self.player.on( 'volumechange', ( e ) => {\n                    self.fire( 'volumechange', e );\n                } );\n                self.player.on( 'error', ( e ) => {\n                    self.fire( 'error', e );\n                } );\n            }\n\n            // Local\n            function addSourceToLocal( element, src, type ) {\n                const source = document.createElement( 'source' );\n                source.src = src;\n                source.type = type;\n                element.appendChild( source );\n            }\n            if ( 'local' === self.type ) {\n                if ( ! self.$video ) {\n                    self.$video = document.createElement( 'video' );\n\n                    // show controls\n                    if ( self.options.showControls ) {\n                        self.$video.controls = true;\n                    }\n\n                    // mute\n                    if ( self.options.mute ) {\n                        self.$video.muted = true;\n                    } else if ( self.$video.volume ) {\n                        self.$video.volume = self.options.volume / 100;\n                    }\n\n                    // loop\n                    if ( self.options.loop ) {\n                        self.$video.loop = true;\n                    }\n\n                    // autoplay enable on mobile devices\n                    self.$video.setAttribute( 'playsinline', '' );\n                    self.$video.setAttribute( 'webkit-playsinline', '' );\n\n                    // add accessibility attributes\n                    if ( self.options.accessibilityHidden ) {\n                        self.$video.setAttribute( 'tabindex', '-1' );\n                        self.$video.setAttribute( 'aria-hidden', 'true' );\n                    }\n\n                    self.$video.setAttribute( 'id', self.playerID );\n                    hiddenDiv.appendChild( self.$video );\n                    document.body.appendChild( hiddenDiv );\n\n                    Object.keys( self.videoID ).forEach( ( key ) => {\n                        addSourceToLocal( self.$video, self.videoID[ key ], `video/${ key }` );\n                    } );\n                }\n\n                self.player = self.player || self.$video;\n\n                let locStarted;\n                self.player.addEventListener( 'playing', ( e ) => {\n                    if ( ! locStarted ) {\n                        self.fire( 'started', e );\n                    }\n                    locStarted = 1;\n                } );\n                self.player.addEventListener( 'timeupdate', function( e ) {\n                    self.fire( 'timeupdate', e );\n\n                    // check for end of video and play again or stop\n                    if ( self.options.endTime ) {\n                        if ( self.options.endTime && this.currentTime >= self.options.endTime ) {\n                            if ( self.options.loop ) {\n                                self.play( self.options.startTime );\n                            } else {\n                                self.pause();\n                            }\n                        }\n                    }\n                } );\n                self.player.addEventListener( 'play', ( e ) => {\n                    self.fire( 'play', e );\n                } );\n                self.player.addEventListener( 'pause', ( e ) => {\n                    self.fire( 'pause', e );\n                } );\n                self.player.addEventListener( 'ended', ( e ) => {\n                    self.fire( 'ended', e );\n                } );\n                self.player.addEventListener( 'loadedmetadata', function() {\n                    // get video width and height\n                    self.videoWidth = this.videoWidth || 1280;\n                    self.videoHeight = this.videoHeight || 720;\n\n                    self.fire( 'ready' );\n\n                    // autoplay\n                    if ( self.options.autoplay ) {\n                        self.play( self.options.startTime );\n                    }\n                } );\n                self.player.addEventListener( 'volumechange', ( e ) => {\n                    self.getVolume( ( volume ) => {\n                        self.options.volume = volume;\n                    } );\n                    self.fire( 'volumechange', e );\n                } );\n                self.player.addEventListener( 'error', ( e ) => {\n                    self.fire( 'error', e );\n                } );\n            }\n            callback( self.$video );\n        } );\n    }\n\n    init() {\n        const self = this;\n\n        self.playerID = `VideoWorker-${ self.ID }`;\n    }\n\n    loadAPI() {\n        const self = this;\n\n        if ( YoutubeAPIadded && VimeoAPIadded ) {\n            return;\n        }\n\n        let src = '';\n\n        // load Youtube API\n        if ( 'youtube' === self.type && ! YoutubeAPIadded ) {\n            YoutubeAPIadded = 1;\n            src = 'https://www.youtube.com/iframe_api';\n        }\n\n        // load Vimeo API\n        if ( 'vimeo' === self.type && ! VimeoAPIadded ) {\n            VimeoAPIadded = 1;\n\n            // Useful when Vimeo API added using RequireJS https://github.com/nk-o/video-worker/pull/7\n            if ( 'undefined' !== typeof global.Vimeo ) {\n                return;\n            }\n\n            src = 'https://player.vimeo.com/api/player.js';\n        }\n\n        if ( ! src ) {\n            return;\n        }\n\n        // add script in head section\n        let tag = document.createElement( 'script' );\n        let head = document.getElementsByTagName( 'head' )[ 0 ];\n        tag.src = src;\n\n        head.appendChild( tag );\n\n        head = null;\n        tag = null;\n    }\n\n    onAPIready( callback ) {\n        const self = this;\n\n        // Youtube\n        if ( 'youtube' === self.type ) {\n            // Listen for global YT player callback\n            if ( ( 'undefined' === typeof global.YT || 0 === global.YT.loaded ) && ! loadingYoutubePlayer ) {\n                // Prevents Ready event from being called twice\n                loadingYoutubePlayer = 1;\n\n                // Creates deferred so, other players know when to wait.\n                window.onYouTubeIframeAPIReady = function() {\n                    window.onYouTubeIframeAPIReady = null;\n                    loadingYoutubeDefer.resolve( 'done' );\n                    callback();\n                };\n            } else if ( 'object' === typeof global.YT && 1 === global.YT.loaded ) {\n                callback();\n            } else {\n                loadingYoutubeDefer.done( () => {\n                    callback();\n                } );\n            }\n        }\n\n        // Vimeo\n        if ( 'vimeo' === self.type ) {\n            if ( 'undefined' === typeof global.Vimeo && ! loadingVimeoPlayer ) {\n                loadingVimeoPlayer = 1;\n                const vimeoInterval = setInterval( () => {\n                    if ( 'undefined' !== typeof global.Vimeo ) {\n                        clearInterval( vimeoInterval );\n                        loadingVimeoDefer.resolve( 'done' );\n                        callback();\n                    }\n                }, 20 );\n            } else if ( 'undefined' !== typeof global.Vimeo ) {\n                callback();\n            } else {\n                loadingVimeoDefer.done( () => {\n                    callback();\n                } );\n            }\n        }\n\n        // Local\n        if ( 'local' === self.type ) {\n            callback();\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}